<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图像生成</title>
</head>
<body>
  <h1>生成你的图像</h1>
  
  <label for="flowerInput">花朵提示：</label>
  <input type="text" id="flowerInput" placeholder="请输入花朵的描述" />
  
  <label for="jellyfishInput">水母提示：</label>
  <input type="text" id="jellyfishInput" placeholder="请输入水母的描述" />
  
  <button onclick="generateImage()">生成图像</button>

  <img id="resultImage" style="display:none; width: 100%; max-width: 600px; margin-top: 20px;" alt="生成的图像">

  <script>
    async function generateImage() {
      const flower = document.getElementById("flowerInput").value.trim();
      const jellyfish = document.getElementById("jellyfishInput").value.trim();

      if (!flower || !jellyfish) {
        alert("请填写完整的提示词！");
        return;
      }

      const response = await fetch("/api/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ flower, jellyfish })
      });

      const result = await response.json();

      if (result.error) {
        console.log("生成失败：", result.error);
        alert("生成失败，请重试！");
      } else {
        const imageUrl = result.imageUrl;
        const image = document.getElementById("resultImage");
        image.src = imageUrl;
        image.style.display = "block";
      }
    }
  </script>
</body>
</html>
